/* 画面全体の基本 */
.friend.offpath { transform: translate(-50%, calc(-50% + -7vh)) scaleX(-1) rotate(-2deg); }
@keyframes bob { 0%,100%{ transform: translate(-50%, -50%) scaleX(-1); } 50%{ transform: translate(-50%, calc(-50% + -1.4vh)) scaleX(-1); } }


/* 寄り道ポイント */
.waypoints { position: absolute; inset: 0; pointer-events: none; }
.wp { position: absolute; transform: translate(-50%, -50%); }
.wp .dot {
width: 10px; height: 10px; border-radius: 50%;
background: radial-gradient(circle at 35% 35%, #fff, #f5b, #0000);
box-shadow: 0 0 12px 4px rgba(255,100,200,.45);
animation: dotPulse 1.2s ease-in-out infinite;
}
@keyframes dotPulse { 0%,100%{ transform: scale(1); } 50%{ transform: scale(1.25); } }


/* ラベル（暗め半透明＋縁取り） */
.wp .label {
margin-top: 8px; padding: 6px 10px; font-size: 12px; line-height: 1.2;
color: #fff; background: rgba(0,0,0,.5);
border: 1px solid rgba(255,255,255,.25); border-radius: 10px;
backdrop-filter: blur(4px);
box-shadow: 0 1px 8px rgba(0,0,0,.35);
opacity: 0; transform: translateY(-6px);
transition: opacity .25s ease, transform .25s ease;
white-space: nowrap; pointer-events: none;
}
.wp.reveal .label { opacity: 1; transform: translateY(0); }
.wp.done .dot { filter: grayscale(1) brightness(.6); opacity: .6; box-shadow: none; }


/* アイコン（タイプ別） */
.wp .icon { margin-top: 6px; display: grid; place-items: center; pointer-events: auto; }
.wp .icon img { width: 36px; height: 36px; object-fit: contain; filter: drop-shadow(0 2px 6px rgba(0,0,0,.5)); }
.wp .icon.flower { width: 34px; height: 34px; border-radius: 50%; background:
radial-gradient(circle at 50% 50%, #ffb3c7 0 40%, transparent 41%),
radial-gradient(circle at 75% 25%, #ffd8e4 0 33%, transparent 34%),
radial-gradient(circle at 25% 25%, #ffd1ef 0 33%, transparent 34%),
radial-gradient(circle at 75% 75%, #ffd1b8 0 33%, transparent 34%),
radial-gradient(circle at 25% 75%, #ffe3a1 0 33%, transparent 34);
box-shadow: 0 0 10px rgba(255,150,200,.55);
}
.wp .icon.flower::after { content: ""; width: 8px; height: 8px; background:#fff; border-radius: 50%; box-shadow: 0 0 6px rgba(255,255,255,.8); }


/* ミニ操作（右下・寄り道中のみ） */
.mini {
position: fixed; right: calc(10px + env(safe-area-inset-right)); bottom: calc(12px + env(safe-area-inset-bottom));
z-index: 12; display: flex; gap: 6px; background: rgba(0,0,0,.35);
padding: 6px; border-radius: 12px; border: 1px solid rgba(255,255,255,.2); backdrop-filter: blur(6px);
}
.mini.hidden { display: none; }
.mini-btn { appearance: none; border: 1px solid rgba(255,255,255,.25); background: rgba(255,255,255,.08);
color: #fff; padding: 6px 8px; border-radius: 10px; font-size: 12px; }
.mini-btn:active { transform: translateY(1px); }


/* エラーバー（下） */
.errorbar {
position: fixed; left: 0; right: 0; bottom: 0; z-index: 20; min-height: 22px;
background: #a00; color: #fff; font-size: 12px; padding: 3px 8px;
transform: translateY(100%); transition: transform .25s ease;
}
.errorbar.show { transform: translateY(0); }
