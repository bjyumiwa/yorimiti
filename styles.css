:root{
--bg:#0b0b10; --fg:#eee; --muted:#b9c; --acc:#7fd; --card:#14141b; --bubble:#16161f;
--heart:#ff4d8f; --green:#49e3a5; --danger:#ff6b6b;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,"Noto Sans JP","Segoe UI",sans-serif}
.app{height:100%;display:flex;flex-direction:column}
.hud{display:flex;justify-content:space-between;align-items:center;padding:.6rem .8rem;background:linear-gradient(180deg,rgba(0,0,0,.7),transparent);position:relative;z-index:3}
.hud .title{font-weight:800;letter-spacing:.2em;opacity:.9}
.btn{background:#222;border:1px solid #333;color:#fff;padding:.4rem .6rem;border-radius:.6rem}
.btn.ghost{background:transparent;border:1px solid #444}
.lang{background:#222;border:1px solid #333;color:#fff;border-radius:.6rem;padding:.3rem}
.meter{position:relative;display:flex;align-items:center;gap:.35rem;padding:.2rem .5rem;background:#1b1b22;border-radius:999px;border:1px solid #2a2a33}
.meter img{width:18px;height:18px;opacity:.9}
.meter .fill{position:absolute;left:0;top:0;bottom:0;width:0%;background:linear-gradient(90deg,var(--heart),#ffd3ea);opacity:.25;border-radius:999px}
.meter span{position:relative;font-variant-numeric:tabular-nums}
.viewport{position:relative;flex:1;overflow:hidden}
.bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:contrast(1.05) saturate(1.03)}
.overlay{position:absolute;inset:0;pointer-events:none}
.char{position:absolute;bottom:8vh;left:8vw;width:min(22vh,28vw);height:auto;background-size:contain;background-repeat:no-repeat;background-position:center;image-rendering:auto;filter:drop-shadow(0 8px 12px rgba(0,0,0,.45));transition:transform .18s}
.ui-layer{position:absolute;left:0;right:0;bottom:0;z-index:2;display:flex;flex-direction:column;gap:.6rem;padding:1rem}
.bubble{align-self:center;max-width:min(720px,92vw);background:var(--bubble);padding:.9rem 1rem;border:1px solid #2a2a33;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
.bubble-name{font-weight:700;color:#bfe}
.bubble-text{line-height:1.55}
.choices{display:flex;flex-wrap:wrap;gap:.6rem;justify-content:center}
.choice{flex:1;min-width:140px;max-width:260px;padding:.7rem 1rem;background:#1b1b22;border:1px solid #2a2a33;border-radius:12px;text-align:center}
.choice:hover{border-color:#4aa}
.sysmsg{align-self:center;background:#15151d;color:#cfe;padding:.6rem 1rem;border-radius:10px;border:1px dashed #2a2a33}
.menus{position:absolute;inset:0;z-index:4;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);backdrop-filter:blur(3px)}
.menu{background:var(--card);border:1px solid #2a2a33;border-radius:16px;padding:1rem;max-width:min(720px,92vw)}
.menu h2{margin:.2rem 0 .6rem}
.menu .row{display:flex;gap:.6rem;flex-wrap:wrap}
.menu .row>*{flex:1}
.menu .list{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.6rem}
.card{background:#1b1b22;border:1px solid #2a2a33;border-radius:12px;padding:.8rem}
.small{font-size:.9em;opacity:.85}
.link{color:var(--acc)}
.hidden{display:none!important}
@media (min-width:900px){.char{bottom:10vh;left:10vw;width:min(28vh,20vw)}}

